<div class="user-profile-component">
  <app-header></app-header>
  <div 
    *ngIf="user"
    class="container p-my-5">
    <div class="p-grid">
      <div class="p-col-12 p-lg-4">
        <p-card
          header="{{user.first_name + ' ' + user.last_name}}"
          subheader="{{user.role_id}}"
          styleClass="profile-img"
        >
          <p-header>
            <img
              alt="User Image"
              src="../../../assets/images/user2-160x160.jpg"
            />
          </p-header>
          <ng-template pTemplate="footer">
            <div class="text-right">
              <p-button
                label="Change Photo"
                iconPos="right"
                icon="pi pi-pencil"
              ></p-button>
            </div>
          </ng-template>
        </p-card>
      </div>
      <div class="p-col-12 p-lg-8">
        <p-card header="User Details" styleClass="user-details p-mt-3 p-mt-lg-0">
          <p-tabView *ngIf="user">
            <p-tabPanel header="Personal Details">
              <form class="user-details-form p-grid">
                <div class="form-group col-12 col-lg-6">
                  <label class="form-group__label" for="first-name">
                    First Name
                  </label>
                  <input
                    class="form-group__input"
                    type="text"
                    name="firstName"
                    id="first-name"
                    [(ngModel)]="user.first_name"
                    pInputText
                    [disabled]="viewMode"
                  />
                </div>
                <div class="form-group p-col-12 p-md-6">
                  <label class="form-group__label" for="last-name">
                    Last Name
                  </label>
                  <input
                    class="form-group__input"
                    type="text"
                    name="lastName"
                    id="last-name"
                    [(ngModel)]="user.last_name"
                    pInputText
                    [disabled]="viewMode"
                  />
                </div>
                <div class="form-group p-col-12">
                  <label class="form-group__label" for="profession">
                    Profession
                  </label>
                  <input
                    class="form-group__input"
                    type="text"
                    name="profession"
                    id="profession"
                    [(ngModel)]="user.profession"
                    pInputText
                    [disabled]="viewMode"
                  />
                </div>
                <div class="form-group p-col-12">
                  <label class="form-group__label" for="email">
                    Email
                  </label>
                  <input
                    class="form-group__input"
                    type="text"
                    name="email"
                    id="email"
                    [(ngModel)]="user.email"
                    pInputText
                    [disabled]="viewMode"
                  />
                </div>
                <div class="form-group p-col-12">
                  <label class="form-group__label" for="phone">
                    Phone
                  </label>
                  <input
                    class="form-group__input"
                    type="text"
                    name="phone"
                    id="phone"
                    [(ngModel)]="user.phone"
                    pInputText
                    [disabled]="viewMode"
                  />
                </div>
              </form>
            </p-tabPanel>
            <p-tabPanel header="Company Details">
              <form
                *ngIf="user.company_details"
                class="company-details-form p-grid">
                <div class="form-group col-12">
                  <label class="form-group__label" for="company-name">
                    Company Name
                  </label>
                  <input
                    class="form-group__input"
                    type="text"
                    name="companyName"
                    id="company-name"
                    [(ngModel)]="user.company_details.name"
                    pInputText
                    [disabled]="viewMode"
                  />
                </div>
                <div class="form-group p-col-12 p-md-2">
                  <label class="form-group__label" for="building-number">
                    Building Number
                  </label>
                  <p-inputNumber
                    class="form-group__input"
                    name="buildingNumber"
                    inputId="building-number"
                    [(ngModel)]="user.company_details.building_number"
                    [min]="0"
                    [useGrouping]="false"
                    [disabled]="viewMode"
                  ></p-inputNumber>
                </div>
                <div class="form-group p-col-12 p-md-10">
                  <label class="form-group__label" for="street-name">
                    Street Name
                  </label
                  >
                  <input
                    class="form-group__input"
                    type="text"
                    name="streetName"
                    id="street-name"
                    [(ngModel)]="user.company_details.street_name"
                    pInputText
                    [disabled]="viewMode"
                  />
                </div>
                <div class="form-group p-col-12">
                  <label class="form-group__label" for="builing-name">
                    Building
                  </label
                  >
                  <input
                    class="form-group__input"
                    type="text"
                    name="buildingName"
                    id="builing-name"
                    [(ngModel)]="user.company_details.building_name"
                    pInputText
                    [disabled]="viewMode"
                  />
                </div>
                <div class="form-group p-col-12 p-md-6">
                  <label class="form-group__label" for="locality">
                    Locality
                  </label>
                  <input
                    class="form-group__input"
                    type="text"
                    name="locality"
                    id="locality"
                    [(ngModel)]="user.company_details.locality"
                    pInputText
                    [disabled]="viewMode"
                  />
                </div>
                <div class="form-group p-col-12 p-md-6">
                  <label class="form-group__label" for="province-abbr">
                    Province Abbreviation
                  </label>
                  <input
                    class="form-group__input"
                    type="text"
                    name="provinceAbbr"
                    id="province-abbr"
                    [(ngModel)]="user.company_details.province_abbr"
                    pInputText
                    [disabled]="viewMode"
                  />
                </div>
                <div class="form-group p-col-12 p-md-6">
                  <label class="form-group__label" for="zip">
                    Zip/Postal Code
                  </label>
                  <p-inputNumber
                    class="form-group__input"
                    name="zip"
                    inputId="zip"
                    [(ngModel)]="user.company_details.zip"
                    [min]="0"
                    [useGrouping]="false"
                    [disabled]="viewMode"
                  ></p-inputNumber>
                </div>
                <div class="form-group p-col-12 p-md-6">
                  <label class="form-group__label" for="country">
                    Country
                  </label>
                  <input
                    class="form-group__input"
                    type="text"
                    name="country"
                    id="country"
                    [(ngModel)]="user.company_details.country"
                    pInputText
                    [disabled]="viewMode"
                  />
                </div>
                <div class="form-group p-col-12 p-md-6">
                  <label class="form-group__label" for="email">
                    Email
                  </label>
                  <input
                    class="form-group__input"
                    type="text"
                    name="email"
                    id="email"
                    [(ngModel)]="user.company_details.email"
                    pInputText
                    [disabled]="viewMode"
                  />
                </div>
                <div class="form-group p-col-12 p-md-6">
                  <label class="form-group__label" for="company-phone">
                    Phone
                  </label>
                  <p-inputNumber
                    class="form-group__input"
                    name="companyPhone"
                    inputId="company-phone"
                    [(ngModel)]="user.company_details.phone"
                    [min]="0"
                    [useGrouping]="false"
                    [disabled]="viewMode"
                  ></p-inputNumber>
                </div>
              </form>
            </p-tabPanel>
          </p-tabView>
          <ng-template pTemplate="footer">
            <div class="text-right">
              <p-button
                *ngIf="!viewMode"
                label="Cancel"
                iconPos="right"
                icon="pi pi-times"
                styleClass="p-button-danger p-mr-2"
                (click)="viewMode = true"
              ></p-button>
              <p-button
                *ngIf="viewMode; else editMode"
                label="Edit"
                iconPos="right"
                icon="pi pi-pencil"
                (click)="editProfile()"
              ></p-button>
              <ng-template #editMode>
                <p-button
                label="Save"
                iconPos="right"
                icon="pi pi-check"
                styleClass="p-button-success"
                (click)="editProfile()"
              ></p-button>
              </ng-template>
            </div>
          </ng-template>
        </p-card>
      </div>
    </div>
  </div>
  <app-footer></app-footer>
</div>
