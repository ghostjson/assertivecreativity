<div class="order-mail-form-maker-color-component mt-3">
  <ng-container [formGroup]="form">
    <div
      formArrayName="questions"
    >
      <div [formGroupName]="questionIndex" class="form-group">
        <label
          class="form-group__label"
          for="form-question-{{ form.value.questions[questionIndex].id }}"
        >
          Enter the question
        </label>
        <input
          type="text"
          formControlName="label"
          id="form-question-{{ form.value.questions[questionIndex].id }}"
          pInputText
        />
        <div class="mt-3 color-input-list" formArrayName="inputs">
          <label class="form-group__label"> Add color choices </label>
          <div
            class="mail-form-maker-color-input-color"
            *ngFor="let input of inputs().controls; index as inputIndex"
          >
            <div
              class="input-color-preview"
              [ngStyle]="{ background: input.value.value }"
            ></div>
            <div class="input-color-details mr-4">
              <div class="input-color-details__name">
                <strong>
                  {{ input.value.label }}
                </strong>
              </div>
              <div class="input-color-details__value">
                {{ input.value.value }}
              </div>
            </div>
            <div class="color-tools">
              <p-button
                icon="pi pi-pencil"
                styleClass="p-button-primary mr-2"
                (onClick)="editQuestionInput(inputIndex, input.value)"
              ></p-button>
              <p-button
                icon="pi pi-times"
                styleClass="p-button-danger"
                (onClick)="removeQuestionInput(inputIndex)"
              ></p-button>
            </div>
          </div>
          <div
            class="add-color-btn p-3 border rounded"
            (click)="toggleColorSelector()"
          >
            <i class="pi pi-plus"></i>
          </div>
        </div>
      </div>
      <div class="d-flex justify-content-end">
        <p-button
          label="Remove Question"
          icon="pi pi-plus"
          iconPos="right"
          styleClass="p-button-sm p-button-danger mr-2"
          (onClick)="removeQuestion()"
        ></p-button>
      </div>
    </div>
  </ng-container>
  <div class="select-color-dialog">
    <p-dialog
      header="Select From Pantone Colors"
      [(visible)]="colorSelector"
      [style]="{ width: '50vw' }"
      [modal]="true"
      [dismissableMask]="true"
      [baseZIndex]="10000"
    >
      <p-listbox
        [options]="pantoneColors"
        [(ngModel)]="currentColorInput"
        [metaKeySelection]="false"
        [checkbox]="true"
        [filter]="true"
        [listStyle]="{ 'max-height': '250px' }"
        optionLabel="label"
        [style]="{ width: '100%' }"
      >
        <p-header>
          <div class="input-group">
            <input
              class="mail-form-color-picker-label-input"
              id="mail-form-question-input"
              type="text"
              [(ngModel)]="currentColorInput.label"
              pInputText
            />
          </div>
          <div class="mail-form-color-picker-input">
            <input
              class="mail-form-color-picker-input__input"
              type="text"
              [(ngModel)]="currentColorInput.value"
              pInputText
            />
            <div
              class="mail-form-color-picker-input__preview"
              [ngStyle]="{
                'background': currentColorInput.value
              }"
            ></div>
          </div>
        </p-header>
        <ng-template let-color pTemplate="item">
          <div class="d-flex justify-content-center align-items-center">
            <i
              class="pi pi-circle-on"
              [style]="'color:' + color.value.value + '; font-size: 1.5rem'"
            ></i>
            <div class="ml-3" style="text-transform: capitalize">
              {{ color.value.label }}
            </div>
          </div>
        </ng-template>
      </p-listbox>
      <ng-template pTemplate="footer">
        <p-button
          icon="pi pi-check"
          (click)="saveQuestionInput()"
          label="Add Color"
          styleClass="p-button-success p-button-sm"
        ></p-button>
      </ng-template>
    </p-dialog>
  </div>  
</div>