<div [formGroup]="formGroup" class="admin-forms-question-maker">
  <ng-container formArrayName="questions">
    <p-card
      class="question-container"
      *ngFor="let question of questions().controls; index as questionIndex"
    >
      <p-header>
        <div
          class="question-type p-input-filled"
          [formGroupName]="questionIndex"
        >
          <span class="question-type__number">
            {{ questionIndex + 1 }}
          </span>
          <label class="sr-only" for="question-type-{{ questionIndex }}">
            Select Question Type
          </label>
          <p-dropdown
            class="question-type__input"
            [options]="questionTypes"
            formControlName="type"
            [filter]="true"
            filterBy="label"
            [showClear]="true"
            inputId="question-type-{{ questionIndex }}"
            placeholder="Select a Question Type"
          ></p-dropdown>
          <p-button
            icon="pi pi-trash"
            styleClass="question-type__delete-btn p-button-text p-button-danger p-button-lg"
            (onClick)="removeQuestion(questionIndex)"
          ></p-button>
        </div>
      </p-header>

      <app-order-mail-form-maker-dropdown
        *ngIf="question.value.type === 'dropdown'"
        [form]="question"
      ></app-order-mail-form-maker-dropdown>
      <app-order-mail-form-maker-radio
        *ngIf="question.value.type === 'radio'"
        [form]="question"
      ></app-order-mail-form-maker-radio>
      <app-order-mail-form-maker-text
        *ngIf="question.value.type === 'text'"
        [form]="question"
      ></app-order-mail-form-maker-text>
      <app-order-mail-form-maker-color
        *ngIf="question.value.type === 'color'"
        [form]="question"
        [pantoneColors]="data"
      ></app-order-mail-form-maker-color>
      <app-order-mail-form-maker-date-picker
        *ngIf="question.value.type === 'date-picker'"
        [form]="question"
      ></app-order-mail-form-maker-date-picker>
    </p-card>

    <div class="p-fluid p-mt-6">
      <div
        pDroppable="formGroup.value.questions"
        (onDrop)="addDroppedForm()"
        class="drop-region p-d-flex p-flex-column p-ai-center p-jc-center"
      >
        <i class="add-icon pi pi-plus"></i>
        <i class="droppable-icon pi pi-check"></i>
        <div class="placeholder-text">Drop Question Here</div>
        <div class="droppable-text">Drop To Add</div>
      </div>
      <button
        type="button"
        label="Add New Question"
        icon="pi pi-plus"
        iconPos="right"
        class="p-button-success p-button-lg p-shadow-2"
        (click)="addQuestion()"
        pButton
      ></button>
    </div>
  </ng-container>
</div>
