<div [formGroup]="formGroup">
  <p-table
    [value]="formGroup.controls.price_table.value"
    [rowTrackBy]="trackByFn"
  >
    <ng-template pTemplate="header">
      <tr>
        <th>Label</th>
        <th>Price Per Piece</th>
        <th>Quantity</th>
        <th>Relation</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-ri="rowIndex" formArrayName="price_table">
      <tr [formGroupName]="ri">
        <td pEditableColumn style="position: relative; z-index: 2;">
          <p-cellEditor>
            <ng-template pTemplate="input">
              <input pInputText type="text" formControlName="label" required />
            </ng-template>
            <ng-template pTemplate="output">
              {{ formGroup.value.price_table[ri].label }}
            </ng-template>
          </p-cellEditor>
        </td>
        <td pEditableColumn>
          <p-cellEditor>
            <ng-template pTemplate="input">
              <!-- <input pInputText type="number" [(ngModel)]="rowData.pricePerPiece" required /> -->
              <p-inputNumber
                formControlName="price_per_piece"
                mode="currency"
                currency="USD"
                locale="en-US"
                [minFractionDigits]="2"
                [maxFractionDigits]="2"
              ></p-inputNumber>
            </ng-template>
            <ng-template pTemplate="output">
              $ {{ formGroup.value.price_table[ri].price_per_piece }}
            </ng-template>
          </p-cellEditor>
        </td>
        <td pEditableColumn>
          <p-cellEditor>
            <ng-template pTemplate="input">
              <!-- <input pInputText type="number" [(ngModel)]="rowData.quantity" /> -->
              <p-inputNumber
                formControlName="quantity"
              ></p-inputNumber>
            </ng-template>
            <ng-template pTemplate="output">
              {{ formGroup.value.price_table[ri].quantity }}
            </ng-template>
          </p-cellEditor>
        </td>
        <td pEditableColumn>
          <p-cellEditor>
            <ng-template pTemplate="input">
              <p-dropdown
                [options]="relations"
                formControlName="relation"
                [style]="{ width: '100%' }"
              ></p-dropdown>
            </ng-template>
            <ng-template pTemplate="output">
              {{ formGroup.value.price_table[ri].relation }}
            </ng-template>
          </p-cellEditor>
        </td>
      </tr>
    </ng-template>
  </p-table>
  <p-button
    label="Add Price Group"
    icon="pi pi-plus"
    iconPos="right"
    (click)="addPriceGroup()"
    class="add-price-grp-btn"
  ></p-button>
</div>
