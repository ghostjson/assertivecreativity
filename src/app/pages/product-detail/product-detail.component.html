<div>
  <app-header></app-header>
  
  <div class="container p-mt-5">
    <div class="p-grid p-justify-between">
      <div class="p-lg-5 p-p-2">
        <p-galleria 
          [(value)]="image_set"  
          [numVisible]="5"
          [circular]="true" 
          [showItemNavigators]="true" 
          [showItemNavigatorsOnHover]="true"
          class="card"
        > 
          <ng-template pTemplate="item" let-item>
              <img [src]="item.src" style="width: 100%; display: block;" />
          </ng-template>
          <ng-template pTemplate="thumbnail" let-item>
              <div class="p-grid p-nogutter p-justify-center">
                  <img [src]="item.src" style="display: block; width: 80px; height: 60px; object-fit: cover;" />
              </div>
          </ng-template>
          <ng-template pTemplate="caption" let-item>
              <h4 style="margin-bottom: .5rem; color: #ffffff;">{{item.title}}</h4>
              <p>{{item.alt}}</p>
          </ng-template>
        </p-galleria>  
      </div>
  
      <div class="p-lg-7">
        <div class="card product-detail">
          <h1 class="product-detail__name">
            {{product.name}}
          </h1>
          <div class="card__content">
            <p class="product-detail__desc">
              {{product.description}}
            </p>
            <div class="product-detail__price">
              <h2>Price: </h2>
              <p-table [value]="product.priceTable">
                <ng-template pTemplate="header">
                    <tr>
                        <th></th>
                        <th>Price Per Piece</th>
                        <th>Quantity</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-price>
                    <tr>
                        <td>{{price.label}}</td>
                        <td>{{price.pricePerPiece}}</td>
                        <td>
                          <span
                            *ngIf="price.relation === 'mte'; else elseRelation"
                            class="pi pi-arrow-up"
                          ></span>
                          <ng-template #elseRelation>
                            <span class="pi pi-arrow-down"></span>
                          </ng-template>
                          {{price.quantity}}
                        </td>
                    </tr>
                </ng-template>
              </p-table>
            </div>
          </div>
          <div class="card__footer p-mt-5">
            <p-button 
              label="Customize" 
              icon="pi pi-pencil"
              iconPos="right"
            ></p-button>
          </div>
        </div>
      </div>
    </div>

    <div 
      [formGroup]="orderForm"
      class="p-grid p-ai-start"
    >
      <div class="p-lg-8 p-p-2">
        <div class="card">
          Form Overview is WIP
        </div>
      </div>
      <ng-container>

      </ng-container>
      <div
        *ngFor="let customForm of customForms().controls; let formInd = index"
        class="p-lg-8 p-p-2"
      >
        <ng-container formArrayName="customForms">
          {{formInd}}
          <div
            *ngFor="let option of options(formInd).controls; let optionInd = index"
            class="card p-mt-5"
          >
            <app-product-options
              [option]="product.customForms[formInd].options[optionInd]"
              [requiredInp]="true"
              [formGroup]="option"
            ></app-product-options>
            
          </div>
        </ng-container>
      </div>
      <div class="p-lg-4 p-p-2">
        <div class="card">
          <p-button 
            label="Confirm Order" 
            icon="pi pi-pencil"
            iconPos="right" 
            (click)="onSubmit()"
          ></p-button>
        </div>
      </div>
    </div>
  </div>
  
  <app-footer></app-footer>
  
</div>
